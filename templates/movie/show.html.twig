{% extends 'base.html.twig' %}

{% block title %}
{{ movie.title }}
{% endblock %}

{% block body %}

{% include 'movie/includes/rating.html.twig' %}


{% if movie.images %}

<div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
	<div class="carousel-inner ">
		{% for image in movie.images %}
		<div class="carousel-item {% if loop.first %} active{% endif %}">
			<img src="{{asset('images/'~ image.fileName ~'')}}" class="d-block w-100" alt="...">
		</div>
		{% endfor %}

	</div>
	<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
		<span class="carousel-control-prev-icon" aria-hidden="true"></span>
		<span class="visually-hidden">Previous</span>
	</button>
	<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
		<span class="carousel-control-next-icon" aria-hidden="true"></span>
		<span class="visually-hidden">Next</span>
	</button>
</div>

{% endif %}


{% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}

{% if is_granted('REVIEW_PUBLISHED', userData) %}
Your review
{{userData.review}}
{% else %}
<a class="btn btn-dark" href="">Add Review</a>
{% endif %}


{% endif %}



<h1>TODO display user Reviews</h1>
{% if reviews is not null and reviews is defined %}
{% for userReview in reviews %}
<b>{{userReview.user.firstName}}</b>
</br>
{{userReview.review}}
</br>
{% endfor %}

{% endif %}



{% endblock %}